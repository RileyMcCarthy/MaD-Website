{% extends "base.html" %}
{% block title %}Status{% endblock %}
{% block content %}
<div class="container">
    <div class="container rounded">
        <h1>Motion Profile</h1>
        <div id="machineProfile"></div>
        {% macro display_dict(dict) %}
        <ul>
        {% for key, value in dict.items() %}
            {% if key[0] != "_" %}
            <li>{{ key }}: {% if value is mapping %}{{ display_dict(value) }}{% else %}{{ value }}{% endif %}</li>
            {% endif %}
        {% endfor %}
        </ul>
        {% endmacro %}
        {{ display_dict(machineProfile) }}
    </div>
    <div class="container-border">
        <a href="javascript: window.close()">Close</a>
    </div>
</div>

<script>
    function getMachineProfile() {
        console.log("Getting machine profile");
        $.post("/machineProfile", {},
            function (data) { // <- This is automatically called after the post completes successfully
                console.log("returning:" + data)
                $("#machineProfile").html(data);
            });
    };

    window.onload = getMachineProfile();
</script>

{% endblock %}